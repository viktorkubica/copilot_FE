<!DOCTYPE html>
<html lang="sk">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Wörwag AI Hub</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=Manrope:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --rose-50: #fff7fb;
        --rose-100: #ffe0ec;
        --rose-200: #ffc6d8;
        --rose-300: #ffb4cc;
        --rose-500: #c9365f;
        --text-dark: #2b1520;
        --text-body: #3d1e2e;
        --text-muted: #6b3a50;
        --shadow: rgba(180, 50, 90, 0.18);
        --border: rgba(81, 36, 58, 0.18);
        color-scheme: light;
      }

      *,
      *::before,
      *::after {
        box-sizing: border-box;
      }

      html,
      body {
        height: 100%;
      }

      body {
        margin: 0;
        font-family: 'Manrope', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        background: linear-gradient(175deg, #fff5f8 0%, #ffe4ed 40%, #ffd4e3 100%);
        color: var(--text-body);
        -webkit-font-smoothing: antialiased;
      }

      /* ── Page Shell ── */
      .page-shell {
        min-height: 100%;
        display: flex;
        flex-direction: column;
        padding: clamp(1rem, 3vw, 2rem);
      }

      /* ── Header ── */
      .site-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 1rem;
        padding: 0.85rem 1.75rem;
        border-radius: 999px;
        background: rgba(255, 255, 255, 0.85);
        backdrop-filter: blur(12px);
        border: 1px solid rgba(255, 220, 230, 0.6);
        box-shadow: 0 8px 32px rgba(180, 50, 90, 0.1);
        position: relative;
        z-index: 10;
      }

      .brand {
        font-family: 'Space Grotesk', 'Manrope', sans-serif;
        font-weight: 700;
        color: var(--text-dark);
        display: flex;
        align-items: baseline;
        gap: 0.5rem;
        line-height: 1;
      }

      .brand span {
        font-size: 1.15rem;
      }

      .brand small {
        font-size: 0.8rem;
        font-weight: 500;
        color: var(--rose-500);
        letter-spacing: 0.05em;
      }

      nav {
        display: flex;
        gap: 1.75rem;
        font-weight: 600;
        font-size: 0.95rem;
      }

      nav a {
        text-decoration: none;
        color: var(--text-body);
        transition: color 150ms ease;
      }

      nav a:hover {
        color: var(--rose-500);
      }

      /* ── Two-Column Layout ── */
      .layout {
        flex: 1;
        display: flex;
        gap: clamp(1.25rem, 3vw, 2.5rem);
        margin-top: clamp(1.25rem, 2.5vw, 2rem);
        min-height: 0;
      }

      /* ── Timeline Panel (left) ── */
      .timeline-panel {
        width: 460px;
        flex-shrink: 0;
        background: rgba(255, 255, 255, 0.9);
        backdrop-filter: blur(10px);
        border-radius: 28px;
        padding: clamp(1.25rem, 3vw, 2rem);
        box-shadow: 0 12px 40px var(--shadow);
        border: 1px solid rgba(255, 220, 230, 0.5);
        display: flex;
        flex-direction: column;
        gap: 1.25rem;
        overflow-y: auto;
      }

      .eyebrow {
        margin: 0;
        text-transform: uppercase;
        letter-spacing: 0.2em;
        font-size: 0.8rem;
        color: var(--rose-500);
        font-weight: 700;
      }

      h1 {
        margin: 0;
        font-size: clamp(1.6rem, 3vw, 2.25rem);
        font-family: 'Space Grotesk', 'Manrope', sans-serif;
        color: var(--text-dark);
        line-height: 1.15;
      }

      .lede {
        margin: 0;
        font-size: 0.95rem;
        line-height: 1.55;
        color: var(--text-muted);
      }

      /* ── Timeline ── */
      .timeline {
        position: relative;
        padding-left: 2.5rem;
        display: flex;
        flex-direction: column;
        gap: 1rem;
      }

      .timeline::before {
        content: '';
        position: absolute;
        top: 0.5rem;
        bottom: 0.5rem;
        left: 1.1rem;
        width: 3px;
        background: linear-gradient(180deg, var(--rose-200), var(--rose-500));
        border-radius: 999px;
      }

      .timeline-item {
        position: relative;
        background: var(--rose-100);
        border-radius: 20px;
        padding: 1rem 1.25rem;
        border: 1px solid var(--border);
      }

      .timeline-item::before {
        content: '';
        position: absolute;
        width: 12px;
        height: 12px;
        border-radius: 50%;
        background: var(--rose-500);
        border: 3px solid #fff;
        left: -2.15rem;
        top: 1.2rem;
        box-shadow: 0 2px 8px rgba(201, 54, 95, 0.35);
      }

      .timeline-heading {
        display: flex;
        align-items: center;
        gap: 0.4rem;
        font-weight: 700;
        font-size: 0.95rem;
        color: var(--text-dark);
        margin-bottom: 0.35rem;
      }

      .timeline-heading::before {
        content: '';
        display: inline-block;
        width: 20px;
        height: 20px;
        flex-shrink: 0;
        background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='%23c9365f' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z'%3E%3C/path%3E%3C/svg%3E") no-repeat center / contain;
      }

      .timeline p {
        margin: 0;
        font-size: 0.88rem;
        color: var(--text-muted);
        line-height: 1.5;
      }

      .timeline a {
        margin-top: 0.6rem;
        display: inline-flex;
        align-items: center;
        gap: 0.3rem;
        font-weight: 700;
        font-size: 0.88rem;
        color: var(--rose-500);
        text-decoration: underline;
        text-decoration-color: rgba(201, 54, 95, 0.3);
        text-underline-offset: 3px;
        transition: text-decoration-color 150ms ease;
      }

      .timeline a:hover {
        text-decoration-color: var(--rose-500);
      }

      .timeline a::after {
        content: '↗';
        font-size: 0.85rem;
      }

      /* ── Chat Panel (right, fills remaining space) ── */
      .chat-panel {
        flex: 1;
        min-height: 0;
        min-width: 0;
        display: flex;
      }

      .chat-frame {
        flex: 1;
        background: rgba(255, 255, 255, 0.9);
        backdrop-filter: blur(10px);
        border-radius: 28px;
        border: 1px solid rgba(255, 220, 230, 0.5);
        padding: 1.25rem;
        box-shadow: 0 12px 40px var(--shadow);
        display: flex;
        flex-direction: column;
      }

      .chat-label {
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 0.15em;
        font-size: 0.75rem;
        color: var(--text-muted);
        margin-bottom: 0.65rem;
      }

      .chat-shell {
        flex: 1;
        border-radius: 22px;
        background: #fff;
        border: 1px solid rgba(255, 210, 225, 0.7);
        overflow: hidden;
        min-height: 0;
      }

      /* ── WebChat Overrides ── */
      #webchat {
        width: 100%;
        height: 100%;
      }

      #webchat * {
        color-scheme: light !important;
      }

      .webchat__send-box__main {
        border-radius: 14px !important;
        padding: 0.4rem !important;
      }

      .webchat__basic-transcript__scrollable {
        scrollbar-width: thin;
        scrollbar-color: rgba(201, 54, 95, 0.3) transparent;
      }

      .webchat__basic-transcript__scrollable::-webkit-scrollbar {
        width: 5px;
      }

      .webchat__basic-transcript__scrollable::-webkit-scrollbar-thumb {
        background: rgba(201, 54, 95, 0.3);
        border-radius: 999px;
      }

      .webchat__typingIndicator {
        transform: scale(0.6);
        width: 360px;
        margin: 0 auto;
      }

      /* Force dark text inside all WebChat elements */
      .webchat__bubble__content,
      .webchat__bubble__content *,
      .webchat__stacked-layout__content,
      .webchat__stacked-layout__content *,
      .webchat__text-content,
      .webchat__text-content * {
        color: #2b1520 !important;
      }

      .webchat__send-box__text-box,
      .webchat__send-box__text-box * {
        color: #2b1520 !important;
      }

      .webchat__suggested-action__button {
        color: #3d1e2e !important;
        font-weight: 600 !important;
      }

      /* ── Responsive ── */
      @media (max-width: 1024px) {
        .layout {
          flex-direction: column;
        }

        .timeline-panel {
          width: auto;
          max-height: 45vh;
        }

        .chat-panel {
          min-height: 55vh;
        }
      }

      @media (max-width: 640px) {
        .page-shell {
          padding: 0.75rem;
        }

        .site-header {
          flex-direction: column;
          border-radius: 20px;
          padding: 0.75rem 1rem;
          gap: 0.5rem;
        }

        nav {
          gap: 1rem;
          font-size: 0.88rem;
        }

        .timeline-panel {
          border-radius: 20px;
          padding: 1rem;
        }

        .timeline {
          padding-left: 1.75rem;
        }

        .timeline::before {
          left: 0.65rem;
        }

        .timeline-item::before {
          left: -1.75rem;
        }

        .chat-frame {
          border-radius: 20px;
          padding: 1rem;
        }

        .chat-shell {
          border-radius: 16px;
        }
      }
    </style>
  </head>
  <body>
    <div class="page-shell">
      <header class="site-header">
        <div class="brand">
          <span>Wörwag Pharma</span>
          <small>AI Hub</small>
        </div>
        <nav aria-label="Primárna navigácia">
          <a href="#">Úvod</a>
          <a href="#">Wörwag AI Hub</a>
          <a href="#">Časté otázky</a>
        </nav>
      </header>
      <main class="layout">
        <section class="timeline-panel" aria-labelledby="timelineTitle">
          <p class="eyebrow">Hovorme spolu o zdraví</p>
          <h1 id="timelineTitle">Vaše otázky riešime v realnom čase.</h1>
          <p class="lede">
            Personalizovaná digitálna sestra odpovie na bežné zdravotné otázky, odporučí obsah odborníkov a spojí vás s terapeutom, keď je to potrebné.
          </p>
          <div class="timeline" role="list">
            <article class="timeline-item" role="listitem">
              <div class="timeline-heading">Čo môžem urobiť pre lepší spánok?</div>
              <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec ultricies diam ut mi volutpat, a auctor nunc venenatis.</p>
              <a href="#">Počúvaj celý podcast</a>
            </article>
            <article class="timeline-item" role="listitem">
              <div class="timeline-heading">Je normálne, že ma bolí chrbát po sedení v práci?</div>
              <p>Nullam aliquam magna in tristique tincidunt. Suspendisse iaculis risus faucibus purus interdum.</p>
              <a href="#">Počúvaj celý podcast</a>
            </article>
            <article class="timeline-item" role="listitem">
              <div class="timeline-heading">Koľko vody by som mal vypiť a ako zistím, či som hydratovaný?</div>
              <p>Vestibulum eu mollis dui, non accumsan leo. Pridali sme odporúčania od našich odborníkov.</p>
              <a href="#">Prečítaj si viac v blogu</a>
            </article>
          </div>
        </section>
        <section class="chat-panel" aria-label="Chat asistent">
          <div class="chat-frame">
            <span class="chat-label">Časté otázky</span>
            <div class="chat-shell">
              <div id="webchat" role="main" aria-live="polite"></div>
            </div>
          </div>
        </section>
      </main>
    </div>

    <script crossorigin="anonymous" src="https://cdn.botframework.com/botframework-webchat/latest/webchat.js"></script>

    <script>
      (async function () {
        const styleOptions = {
          hideUploadButton: true,
          avatarBorderRadius: 18,
          avatarSize: 34,
          botAvatarImage: 'https://raw.githubusercontent.com/danielluptak/barbercss/refs/heads/main/Image2.jpg',
          userAvatarImage: 'https://raw.githubusercontent.com/danielluptak/barbercss/refs/heads/main/Image2.jpg',
          showAvatarInGroup: 'status'
        };

        const styleSet = window.WebChat.createStyleSet({
          /* Bot bubbles */
          bubbleBackground: '#fff',
          bubbleTextColor: '#2b1520',
          bubbleBorderWidth: 1,
          bubbleBorderRadius: 16,
          bubbleBorderColor: 'rgba(201, 54, 95, 0.15)',

          /* User bubbles */
          bubbleFromUserBackground: '#ffd6e5',
          bubbleFromUserBorderRadius: 16,
          bubbleFromUserBorderStyle: 'solid',
          bubbleFromUserBorderColor: 'rgba(201, 54, 95, 0.25)',
          bubbleFromUserTextColor: '#2b1520',

          rootHeight: '100%',
          rootWidth: '100%',
          hideToaster: false,
          groupTimestamp: false,
          timestampColor: '#8a4560',
          timestampFormat: 'AbsoluteTime',

          transcriptActivityVisualKeyboardIndicatorStyle: 'none',
          transcriptActivityVisualKeyboardIndicatorWidth: 0,

          /* Suggested actions */
          suggestedActionBorderStyle: 'solid',
          suggestedActionBorderColor: 'rgba(201, 54, 95, 0.25)',
          suggestedActionBorderRadius: 999,
          suggestedActionBackground: '#fff0f5',
          suggestedActionTextColor: '#2b1520',

          /* Send box */
          sendBoxHeight: 56,
          sendBoxBackground: '#fff',
          sendBoxPlaceholderColor: '#8a4560',
          sendBoxTextColor: '#2b1520',
          sendBoxBorderBottom: '1px solid rgba(201, 54, 95, 0.18)',
          sendBoxBorderLeft: '1px solid rgba(201, 54, 95, 0.12)',
          sendBoxBorderRight: '1px solid rgba(201, 54, 95, 0.12)',
          sendBoxBorderTop: '1px solid rgba(201, 54, 95, 0.18)',
          sendBoxBorderRadius: 14,
          sendBoxButtonColor: '#c9365f',
          sendBoxButtonColorOnHover: '#a32d55',
          sendBoxButtonColorOnActive: '#8b2346',
          sendBoxButtonShadeColorOnActive: 'rgba(201, 54, 95, 0.15)',
          sendBoxButtonShadeBorderRadius: 999,
          sendBoxButtonBorderStyle: 'none',
          sendBoxButtonShadeInset: 2,

          typingAnimationDuration: 5000,
          typingAnimationWidth: 340,
          typingAnimationBackgroundImage: `url('https://raw.githubusercontent.com/danielluptak/barbercss/refs/heads/main/nieco.svg')`
        });

        styleSet.root = {
          ...styleSet.root,
          background: 'transparent',
          height: '100%'
        };

        styleSet.textContent = {
          ...styleSet.textContent,
          fontFamily: "'Manrope', sans-serif !important",
          fontWeight: '500 !important',
          fontSize: '14px !important',
          color: '#2b1520 !important'
        };

        const tokenEndpointURL = new URL(
          'https://2c5271397323eb68a159ab9ec3a7ba.41.environment.api.powerplatform.com/powervirtualagents/botsbyschema/cr5bf_slovenskyKnowledgeAgent/directline/token?api-version=2022-03-01-preview'
        );

        const locale = document.documentElement.lang || 'sk';

        const apiVersion = tokenEndpointURL.searchParams.get('api-version');

        const [directLineURL, token] = await Promise.all([
          fetch(new URL(`/powervirtualagents/regionalchannelsettings?api-version=${apiVersion}`, tokenEndpointURL))
            .then((response) => {
              if (!response.ok) {
                throw new Error('Failed to retrieve regional channel settings.');
              }
              return response.json();
            })
            .then(({ channelUrlsById: { directline } }) => directline),
          fetch(tokenEndpointURL)
            .then((response) => {
              if (!response.ok) {
                throw new Error('Failed to retrieve Direct Line token.');
              }
              return response.json();
            })
            .then(({ token }) => token)
        ]);

        const directLine = WebChat.createDirectLine({ domain: new URL('v3/directline', directLineURL), token });

        const subscription = directLine.connectionStatus$.subscribe({
          next(value) {
            if (value === 2) {
              directLine
                .postActivity({
                  localTimezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
                  locale,
                  name: 'startConversation',
                  type: 'event'
                })
                .subscribe();

              subscription.unsubscribe();
            }
          }
        });

        WebChat.renderWebChat({ directLine, locale, styleSet, styleOptions }, document.getElementById('webchat'));

        /* Replace send button icon with brand-coloured SVG arrow */
        await new Promise((resolve) => setTimeout(resolve, 1000));

        const sendButton = document.querySelector('.webchat__send-box__button');
        if (sendButton) {
          sendButton.innerHTML = `<svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="#c9365f" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></svg>`;
          sendButton.style.display = 'flex';
          sendButton.style.alignItems = 'center';
          sendButton.style.justifyContent = 'center';
        }
      })().catch((err) => console.error(err));
    </script>
  </body>
</html>
